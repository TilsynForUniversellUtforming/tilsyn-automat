@page
@using Difi.Sjalvdeklaration.Shared.Classes.Declaration.Data
@using Difi.Sjalvdeklaration.Shared.Enum
@model wwwroot.Pages.Declaration.DeclarationReadModel

@{
    var title = "Egenkontroll - Läsa";

    ViewData["Title"] = title;

    var mainIndex = 1;
}

@Html.DisplayFor(x => x.DeclarationItemForm, "DeclarationStatus", new { backUrl = "/Declaration/DeclarationForm?id=" + Model.DeclarationItemForm.Id })

<main>
    <div class="row">
        <div class="xlarge-12 large-10 small-12 large-centered xlarge-uncentered columns">

            @Html.DisplayFor(x => x.DeclarationItemForm, "DeclarationReadStep1", new {mainIndex, allDone = @Model.AllDoneStep1 })

            @foreach (var declarationIndicatorGroup in Model.TestGroupItemList)
            {
                mainIndex++;
                @Html.DisplayFor(x => declarationIndicatorGroup, "DeclarationReadTestGroup", new {mainIndex, declarationItem = Model.DeclarationItemForm })
            }

            <form method="post">
                <div class="row">
                    <div class="small-12 medium-7 columns">
                        <a asp-page="/Declaration/DeclarationForm" class="button large" asp-route-id="@Model.DeclarationItemForm.Id">@Localizer["Back"]</a>

                        @if (Model.DeclarationItemForm.DeclarationTestItem.StatusCount == 4)
                        {
                            <button class="button large" type="submit" asp-page-handler="SendIn" asp-route-id="@Model.DeclarationItemForm.Id">@Localizer["Send"]</button>
                        }
                        else
                        {
                            <div>For å kunne sende inn, må du først fullføre egenkontrollen ved å svare på alle spørsmålene.</div>
                        }
                    </div>
                    <div class="small-10 medium-5 columns">
                        <button class="button" type="submit" asp-route-id="@Model.DeclarationItemForm.Id">@Localizer["Print"]</button>
                        <br /><br />
                    </div>
                </div>
            </form>
        </div>
    </div>
</main>