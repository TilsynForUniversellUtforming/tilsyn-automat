@page
@model DeclarationListModel
@{
    ViewData["Title"] = "DeclarationList";
}

<h1>@Localizer["Self-inspection"]</h1>

<form method="post">

    @*<div class="row">
            <div class="small-12 column">
                <h3>@Localizer["Filter self-controls"]</h3>
            </div>
        </div>*@

    @*<div class="row">
            <div class="small-12 column">
                <div class="filter-wrapper">
                    <fieldset>
                        <legend>@Localizer["Date submitted"]</legend>
                    </fieldset>



                    <div class="row">

                        <div class="small-3 column">
                            <div class="row">
                                <div class="small-6 column">
                                    <label for="alt1">
                                        @Localizer["From"]
                                    </label>
                                    <input id="alt1" type="text" />
                                </div>
                                <div class="small-6 column">
                                    <label for="alt2">
                                        @Localizer["To"]
                                    </label>
                                    <input id="alt2" type="text" />
                                </div>
                            </div>

                        </div>

                        <div class="small-6 column">
                            <div class="row">
                                <div class="small-6 column">
                                    <label for="alt3">
                                        @Localizer["Status of self-control"]
                                    </label>
                                    <select id="alt3">
                                        <option>Alle</option>
                                        <option>?</option>
                                    </select>
                                </div>
                                <div class="small-6 column">
                                    <label for="alt3">
                                        @Localizer["Status of supervision"]
                                    </label>
                                    <select id="alt4">
                                        <option>Alle</option>
                                        <option>?</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="small-3 column">

                            <div class="row collapse">
                                <div class="small-6 column">
                                    <br />
                                    <button class="button">@Localizer["Filter"]</button>
                                </div>
                                <div class="small-6 column">
                                    <br />
                                    <button class="button alt">@Localizer["Show all"]</button>
                                </div>
                            </div>

                        </div>

                    </div>

                </div>
            </div>
        </div>*@

    <div class="row">
        <div class="small-6 column">
            <h3>@Model.ViewCount @Localizer["Self-inspections"]  @Localizer["of total"] @Model.TotalCount</h3>
        </div>
        <div class="small-6 text-right column">
            <button class="button export-all" type="submit" asp-page-handler="ExportDeclarationList">@Localizer["Export all"]</button>
        </div>
    </div>


    <table class="table jsNormalTableSort">
        <caption>
            <h2>@Localizer["DeclarationList-header-h2"]</h2>
        </caption>
        <thead>
            <tr>
                <th scope="col">@Html.DisplayNameFor(x => x.LocalizationItem.Name)</th>
                <th scope="col">@Html.DisplayNameFor(x => x.LocalizationItem.Company.Name)</th>
                <th scope="col">@Localizer["Executive officer"]</th>
                <th scope="col">@Html.DisplayNameFor(x => x.LocalizationItem.DeadlineDate)</th>
                <th scope="col">@Html.DisplayNameFor(x => x.LocalizationItem.SentInDate)</th>
                <th scope="col">@Localizer["Status of self-control"]</th>
                <th scope="col">@Localizer["Status of supervision"]</th>
                <th class="sorter-false" scope="col"></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.DeclarationList)
            {
                var contactPerson = item.Company.ContactPersonList.FirstOrDefault();

                <tr>
                    <td class="clickable-td">
                        <a asp-page="/Admin/DeclarationForm" asp-route-id="@item.Id" asp-route-companyId="@item.Company.Id">@item.Name</a>
                    </td>
                    <td class="clickable-td">
                        @item.Company.Name
                    </td>
                    <td class="clickable-td">
                        @item.User.Name
                    </td>
                    <td class="clickable-td">
                        @item.DeadlineDate.ToString("dd.MM.yyyy HH:mm")
                    </td>
                    <td class="clickable-td">
                        @if (item.SentInDate != DateTime.MinValue)
                        {
                            @item.SentInDate.ToString("dd.MM.yyyy HH:mm")
                        }
                        else
                        {
                            <span>-</span>
                        }
                    </td>
                    <td class="clickable-td">
                        @item.Status.TextCompany
                    </td>
                    <td class="clickable-td">
                        @item.Status.TextAdmin
                    </td>

                    <td>
                        <button class="button export" type="submit" asp-page-handler="ExportDeclaration" asp-route-id="@item.Id"><span class="show-for-sr">@Localizer["Export"]</span></button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</form>