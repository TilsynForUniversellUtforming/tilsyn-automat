@using Difi.Sjalvdeklaration.Shared.Classes.Declaration.Data
@using Difi.Sjalvdeklaration.Shared.Classes.Declaration.Rules

@model AnswerItem

@{
    var name = ViewData["id"];
    var text = ViewData["text"];
    var orderText = ViewData["orderText"];
    var firstQuestion = (bool)ViewData["firstQuestion"];
    var answerData = (AnswerData)ViewData["answerData"];

    var hiddenId = "answer_image_" + answerData.AnswerItem.Id;
    var oldId = "old_" + answerData.AnswerItem.Id;
    var answerDataId = "";
}

<div class="jsToggleHelpTarget" style="display: none;" aria-hidden="true">
    <div class="legend">
        <span class="collapse row">
            <span class="small-10 columns">
                <span class="collapse row">
                    <span class="small-2 medium-1 columns">
                        @if (firstQuestion)
                        {
                        <span class="legend-number">@orderText</span>
                        }
                    </span>
                    <span class="small-10 medium-11 columns">
                        <span class="legend-text">
                            Hjelp
                        </span>
                    </span>
                </span>
            </span>

            <span class="small-2 columns text-right">
                <button class="card-help-close-button jsToggleHelpButton" aria-controls="" aria-expanded="false"><span class="show-for-sr">Lukk hjelp</span></button>
            </span>
        </span>
    </div>

    <div class="card-help-text">
        <img alt="desciption" src="~/images/help.png" /><br />
        <h3>Krav</h3>
        <p>Dersom to eller flere betalingsterminaler står ved siden av hverandre på rett linje, skal det være minst 150 centimeter fra midten av betalingsterminalen til midten av neste betalingsterminal. NB Kravet gjelder ikke der betalingsterminalene står overfor hverandre.</p>
        <h3>Hensikt</h3>
        <p>Formålet er at betalingsterminaler som står ved siden av hverandre, kan brukes samtidig, og at kundene som skal betale varene sine, kan komme seg bort uten å forstyrre hverandre.</p>
    </div>
</div>

<div class="form-field">
    <label class="legend" for="@name">
        @if (firstQuestion)
        {
        <span class="collapse row">
            <span class="small-10 columns">
                <span class="collapse row">
                    <span class="small-2 medium-1 columns">
                        <span class="legend-number">@orderText</span>
                    </span>
                    <span class="small-10 medium-11 columns">
                        <span class="legend-text">
                            @text
                        </span>
                    </span>
                </span>
            </span>

            <span class="small-2 columns text-right">
                <button class="card-help-button jsToggleHelpButton" aria-controls="" aria-expanded="false"><span class="show-for-sr">Vis hjelp</span></button>
            </span>
        </span>
        }
        else
        {
        <span class="card-divider">
            <span class="legend-text">
                @text
            </span>
        </span>
        }
    </label>

    <div class="card-divider text-center medium-text-left">
        @if (answerData.Image != null)
        {
            answerDataId = answerData.Image.Id.ToString();
            var image = answerData.Image.Container + "/" + answerData.Image.Blob;

        <div class="uploaded jsUploaded" id="@oldId">
            <div>
                <ul class="listing qq-upload-list-selector qq-upload-list">
                    <li>
                        <img src="@image" alt="" width="114" />
                        <button class="link-button jsButtonRemoveImage" data-id="@Model.Id">Fjern bilde</button>
                    </li>
                </ul>
            </div>
        </div>
        }

        <div class="uploader" id="@Model.Id"></div>
        <input type="hidden" name="@name" id="@hiddenId" value="@answerDataId" />
    </div>
</div>